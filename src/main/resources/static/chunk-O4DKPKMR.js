import{a as L}from"./chunk-W34TJRMV.js";import{G as r,H as n,I as y,J as P,K as l,L as x,M as o,_ as O,ca as d,e as _,f,i as w,k as v,n as b,p as s,q as a,v as h,y as C}from"./chunk-A2SXIZBO.js";var m=class i{constructor(t,e){this.http=t;this.router=e}baseUrl="http://localhost:8080/api/auth";validateFields(t){return!!t.username&&!!t.password&&!!t.role}login(t){return this.validateFields(t)?(this.router.navigate(["/dashboard"]),_("Login successful")):f(()=>new Error("All fields are required!"))}register(t){return this.http.post(`${this.baseUrl}/register`,t).pipe(w(e=>(console.error("Registration failed:",e),f(()=>new Error(e.error||"Registration failed")))))}static \u0275fac=function(e){return new(e||i)(b(O),b(d))};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var M=class i{constructor(t,e){this.authService=t;this.router=e}username="";password="";role="customer";onLogin(){if(!this.username||!this.password||!this.role){console.error("Login failed: All fields must be filled"),alert("Please fill in all fields");return}let t={username:this.username,password:this.password,role:this.role};this.authService.login(t).subscribe({next:e=>{console.log("Login successful:",e),alert("Login successful"),this.router.navigate(["/home"])},error:e=>{console.error("Login failed:",e),e.error&&e.error.message?alert("Login failed: "+e.error.message):e.status===401?alert("Login failed: Invalid credentials"):alert("Login failed: An unexpected error occurred")}})}static \u0275fac=function(e){return new(e||i)(h(m),h(d))};static \u0275cmp=C({type:i,selectors:[["app-login"]],decls:27,vars:0,consts:[["usernameInput",""],["passwordInput",""],[1,"login"],[1,"form"],["for","username"],["id","username","placeholder","Enter your username","type","text",3,"input"],["for","password"],["id","password","placeholder","Enter your password","type","password",3,"input"],["type","radio","name","role","value","customer",3,"change"],["type","radio","name","role","value","vendor",3,"change"],[1,"login-buttons"],[3,"click"]],template:function(e,p){if(e&1){let c=P();y(0,"app-header"),r(1,"div",2)(2,"h2"),o(3,"Login Page"),n(),r(4,"div",3)(5,"label",4),o(6,"Username:"),n(),r(7,"input",5,0),l("input",function(){s(c);let g=x(8);return a(p.username=g.value)}),n()(),r(9,"div",3)(10,"label",6),o(11,"Password:"),n(),r(12,"input",7,1),l("input",function(){s(c);let g=x(13);return a(p.password=g.value)}),n()(),r(14,"div",3)(15,"label"),o(16,"Role:"),n(),r(17,"div")(18,"label")(19,"input",8),l("change",function(){return s(c),a(p.role="customer")}),n(),o(20," Customer "),n(),r(21,"label")(22,"input",9),l("change",function(){return s(c),a(p.role="vendor")}),n(),o(23," Vendor "),n()()(),r(24,"div",10)(25,"button",11),l("click",function(){return s(c),a(p.onLogin())}),o(26,"Login"),n()()()}},dependencies:[L],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}body[_ngcontent-%COMP%]{background-color:#013d3d;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;color:#0f0e0e}.login[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 8px 24px #0000001a;width:360px;max-width:100%;text-align:center;display:flex;flex-direction:column;justify-content:center;margin:auto}h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:24px;margin-bottom:20px;font-weight:600}.form[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}label[_ngcontent-%COMP%]{display:block;color:#7f8c8d;font-size:14px;margin-bottom:8px;font-weight:500}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:2px solid #ecf0f1;border-radius:6px;transition:border-color .3s ease;background-color:#f9f9f9;color:#34495e}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;background-color:#fff}input[type=radio][_ngcontent-%COMP%]{margin-right:8px;accent-color:#3498db}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;margin-right:20px;font-size:14px}.switch[_ngcontent-%COMP%]{display:inline-block;margin-top:8px}.login-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:10px;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:12px 18px;border-radius:6px;font-size:16px;cursor:pointer;flex:1;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#2980b9}button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 5px #3498db80}"]})};export{M as LoginComponent};
